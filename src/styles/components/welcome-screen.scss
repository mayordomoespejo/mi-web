@use "sass:math";
@use "../variables" as *;

$ease-out-smooth: cubic-bezier(0.16, 1, 0.3, 1);
$welcome-bg-enter-duration: 0s;
$welcome-enter-rotate-duration: 5s;
$welcome-close-rotate-duration: 0.55s;
$welcome-close-total-duration: 0.8s;

.welcome-screen {
  position: fixed;
  inset: 0;
  z-index: 9999;
  width: 100%;
  display: grid;
  place-items: center;
  align-content: center;
  padding: $space-6;
  color: $color-brand-text;
  background: $color-brand;
  opacity: 0;
  animation: welcome-bg-enter $welcome-bg-enter-duration ease-out forwards;

  &.welcome-screen--closing {
    animation: welcome-screen-fade-out $welcome-close-total-duration ease-out forwards;
  }
}

.welcome-screen__branding {
  position: relative;
  display: inline-flex;
  flex-direction: column;
  align-items: center;
  margin: 0;
  padding: 0;
  border: 0;
  background: transparent;
  color: inherit;
  font: inherit;
  cursor: pointer;
  text-align: inherit;
  perspective: 1600px;

  &:focus-visible {
    outline: 2px solid $color-brand-text;
    outline-offset: 4px;
  }
}

.welcome-screen__letters {
  display: inline-flex;
  align-items: center;
  justify-content: center;
  transform-style: preserve-3d;
  animation: welcome-letter-block-enter $welcome-enter-rotate-duration $ease-out-smooth forwards;
  animation-delay: $welcome-bg-enter-duration;

  .welcome-screen--closing & {
    animation-delay: 0s;
    animation: welcome-letter-exit-left $welcome-close-rotate-duration ease-in forwards;
  }
}

.welcome-screen__letter {
  display: inline-block;
  font-family: $font-main;
  font-size: clamp(7rem, 29vw, 22rem);
  line-height: 0.85;
  font-weight: 700;
  letter-spacing: -0.05em;
  opacity: 1;
  transform-style: preserve-3d;
  transition: color 0.5s ease, -webkit-text-fill-color 0.5s ease, -webkit-text-stroke 0.5s ease;
  transform: translate3d(0, 0, 0) scale(1) rotateX(0) rotateY(0) rotateZ(0);
}

.welcome-screen__branding:hover .welcome-screen__letter,
.welcome-screen__branding:focus-visible .welcome-screen__letter {
  color: transparent;
  -webkit-text-fill-color: transparent;
  -webkit-text-stroke: 2px $color-brand-text;
  paint-order: stroke fill;
}

.welcome-screen__subtitle {
  font-family: $font-main;
  font-size: clamp(0.95rem, 2.8vw, 1.8rem);
  font-weight: 700;
  line-height: 1;
  letter-spacing: 0.2em;
  text-transform: uppercase;
  text-align: center;
  transform-style: preserve-3d;
  animation: welcome-subtitle-enter-right $welcome-enter-rotate-duration $ease-out-smooth forwards;
  animation-delay: $welcome-bg-enter-duration;

  .welcome-screen--closing & {
    opacity: 1;
    animation-delay: 0s;
    animation: welcome-subtitle-exit-right $welcome-close-rotate-duration ease-in forwards;
  }
}

@keyframes welcome-bg-enter {
  from {
    opacity: 0;
  }
  to {
    opacity: 1;
  }
}

@keyframes welcome-letter-block-enter {
  from {
    transform: rotateY(-90deg);
  }
  to {
    transform: rotateY(0deg);
  }
}

@keyframes welcome-subtitle-enter-right {
  from {
    transform: rotateY(90deg);
  }
  to {
    transform: rotateY(0deg);
  }
}

@keyframes welcome-letter-exit-left {
  from {
    transform: rotateY(0deg);
  }
  to {
    transform: rotateY(-90deg);
  }
}

@keyframes welcome-subtitle-exit-right {
  from {
    transform: rotateY(0deg);
  }
  to {
    transform: rotateY(90deg);
  }
}

@keyframes welcome-screen-fade-out {
  0% {
    opacity: 1;
  }
  #{math.div($welcome-close-rotate-duration, $welcome-close-total-duration) * 100%} {
    opacity: 1;
  }
  100% {
    opacity: 0;
  }
}
